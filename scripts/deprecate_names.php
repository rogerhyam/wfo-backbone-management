<?php

/*

Given list of WFO remove them from the classification and deprecate them

*/

require_once("../config.php");
require_once("../include/WfoDbObject.php");
require_once("../include/Name.php");
require_once("../include/Taxon.php");
require_once("../include/User.php");
require_once("../include/UpdateResponse.php");

// we need to have a mock session  
$_SESSION['user'] = serialize(User::loadUserForDbId(1));

$wfo_ids = array(
	"wfo-0001133019",
	"wfo-0000206357",
	"wfo-0000983588",
	"wfo-0000991628",
	"wfo-0001007052",
	"wfo-0000983794",
	"wfo-0000983795",
	"wfo-0000991779",
	"wfo-0000991780",
	"wfo-0001014773",
	"wfo-0001014774",
	"wfo-0000983310",
	"wfo-0000984527",
	"wfo-0000983311",
	"wfo-0000984583",
	"wfo-0000983792",
	"wfo-0001014766",
	"wfo-0000983587",
	"wfo-0001007047",
	"wfo-0000983662",
	"wfo-0001009334",
	"wfo-0000983369",
	"wfo-0000989798",
	"wfo-0000204588",
	"wfo-0000107865",
	"wfo-0000205224",
	"wfo-0000183411",
	"wfo-0000183422",
	"wfo-0000183425",
	"wfo-0000506370",
	"wfo-0000183427",
	//"wfo-0000183394",
	"wfo-0000983180",
	"wfo-0001018253",
	"wfo-0000211347",
	"wfo-0000204833",
	"wfo-0000198613",
	"wfo-0000195773",
	"wfo-0000197003",
	"wfo-0000197051",
	"wfo-0000197106",
	"wfo-0000197107",
	"wfo-0000197109",
	"wfo-0000186716",
	"wfo-0000196079",
	"wfo-0000196101",
	"wfo-0000203801",
	"wfo-0000200417",
	"wfo-0001294728",
	"wfo-0000195805",
	"wfo-0000983260",
	"wfo-0001017212",
	"wfo-0000983259",
	"wfo-0000983258",
	"wfo-0001017155",
	"wfo-0000203816",
	"wfo-0000190183",
	"wfo-0000190185",
	"wfo-0000983186",
	"wfo-0000983482",
	"wfo-0001299691",
	"wfo-0000196792",
	"wfo-0000207525",
	"wfo-0000206331",
	"wfo-0000204301",
	"wfo-0000199829",
	"wfo-0000195869",
	"wfo-0000206140",
	"wfo-0000206153",
	// "wfo-0000197320",
	"wfo-0000197310",
	"wfo-0000199954",
	"wfo-0000199947",
	"wfo-0000205955",
	"wfo-0000200016",
	"wfo-0000184785",
	"wfo-0000184786",
	"wfo-0000196588",
	"wfo-0000200123",
	"wfo-0000200051",
	"wfo-0000200142",
	"wfo-0000204698",
	"wfo-0001291703",
	"wfo-0001045768",
	"wfo-0001045931",
	"wfo-0000203802",
	"wfo-0000997140",
	"wfo-0000193604",
	"wfo-0000199861",
	"wfo-0000199868",
	"wfo-0000213025",
//	"wfo-0000983264",
	"wfo-0001017418",
	"wfo-0000214621",
	"wfo-0000196564",
	"wfo-0000196565",
	"wfo-0000196568",
	"wfo-0000195143",
	"wfo-0000195185",
	"wfo-0000209058",
	"wfo-0000209043",
	"wfo-0001140891",
	"wfo-0000183717",
	"wfo-0000196485",
	"wfo-0000196520",
	"wfo-0000196438",
	"wfo-0000196442",
	"wfo-0000196470",
	"wfo-0000196493",
	"wfo-0000196494",
	"wfo-0000196457",
	"wfo-0000196460",
	"wfo-0000197563",
	"wfo-0000192507",
	"wfo-0001290190",
	"wfo-0001290188",
	"wfo-0001290191",
	"wfo-0000186670",
	"wfo-0000186631",
	"wfo-0000183498",
	"wfo-0000184053",
	"wfo-0001046512",
	"wfo-0001077546",
	"wfo-0000205353",
	"wfo-0000203632",
	"wfo-0000203675",
	"wfo-0000182623",
	"wfo-0000200496",
	"wfo-0000203939",
	"wfo-0000196390",
	"wfo-0000196411",
	"wfo-0000196339",
	"wfo-0000196342",
	"wfo-0000196350",
	"wfo-0000192973",
	"wfo-0000196245",
	"wfo-0000196246",
	"wfo-0000196303",
	"wfo-0000196315",
	"wfo-0000196261",
	"wfo-0000196268",
	"wfo-0000196357",
	"wfo-0000196370",
	"wfo-0000196270",
	"wfo-0000196273",
	"wfo-0000209238",
	"wfo-0000208645",
	"wfo-0000183494",
	"wfo-0000184013",
	"wfo-0000163770",
	"wfo-0000163772",
	"wfo-0000206568",
	"wfo-0001069753",
	"wfo-0000195731",
	"wfo-0000195736",
	"wfo-0000195741",
	"wfo-0000983595",
	"wfo-0001007241",
	"wfo-0000983353",
	"wfo-0000988691",
	"wfo-0000983471",
	"wfo-0000998548",
	"wfo-0000983633",
	"wfo-0001008497",
	"wfo-0000983516",
	"wfo-0000983773",
	"wfo-0001013988",
	"wfo-0000183495",
	"wfo-0000184015",
	"wfo-0001085207",
	"wfo-0000983699",
	"wfo-0001010780",
	"wfo-0000983698",
	"wfo-0001010779",
	"wfo-0000983440",
	"wfo-0000995828",
	"wfo-0000983390",
	"wfo-0000991355",
	"wfo-0000983298",
	"wfo-0001050675",
	"wfo-0000196618",
	"wfo-0000196619",
	"wfo-0000984466",
	"wfo-0000983439",
	"wfo-0000995705",
	"wfo-0000983689",
	"wfo-0001010495",
	"wfo-0000983309",
	"wfo-0000983184",
	"wfo-0000983223",
	"wfo-0000983181",
	"wfo-0000983484",
	"wfo-0000983810",
	"wfo-0001015317",
	"wfo-0000984385",
	"wfo-0000983798",
	"wfo-0001014899",
	"wfo-0000983178",
	"wfo-0001017697",
	"wfo-0000983804",
	"wfo-0001015074",
	"wfo-0000983175",
	"wfo-0001016443",
	"wfo-0000983803",
	"wfo-0001015068",
	"wfo-0000983805",
	"wfo-0001015075",
	"wfo-0000983188",
	"wfo-0000984930",
	"wfo-0001294708",
	"wfo-0000983455",
	"wfo-0000997096",
	"wfo-0000983476",
	"wfo-0000999404",
	"wfo-0000983684",
	"wfo-0001010421",
	"wfo-0000983685",
	"wfo-0001010423",
	"wfo-0000983517",
	"wfo-0001002773",
	"wfo-0000983463",
	"wfo-0000997832",
	"wfo-0000983185",
	"wfo-0000983302",
	"wfo-0000983190",
	"wfo-0000985294",
	"wfo-0000983464",
	"wfo-0000997833",
	"wfo-0000983256",
	"wfo-0001016978",
	"wfo-0000200382",
	"wfo-0000197452",
	"wfo-0000196322",
	"wfo-0000200827",
	"wfo-0000183329",
	"wfo-0000203345",
	"wfo-0000213070",
	"wfo-0000197740",
	"wfo-0000191377",
	"wfo-0000191344"
);

foreach ($wfo_ids as $wfo) {

    $name = Name::getName($wfo);

    $display_name = strip_tags($name->getFullNameString());
    echo "\n$wfo\t{$display_name}";

    $taxon = Taxon::getTaxonForName($name);
    if(!$taxon->getId()){
        echo "\tNot in taxonomy";
    }else{
        if($taxon->getAcceptedName() == $name){
            // we are an accepted taxon
            // try and delete - will fail if we have children or synonyms
            echo "\tDeleted Taxon";
            $taxon->delete();
        }else{
            // we are a synonym - remove us from the taxon
            echo "\tRemoved Synonym";
            $taxon->removeSynonym($name);
        }

        // set the name to deprecated
        echo "\tSet to deprecated";
        $name->updateStatus('deprecated');
    }

}